# Example workflow for database migration
# Run with: ado workflow run examples/migration.workflow.yaml

name: Database Migration Workflow
description: Safely migrate database schema with review steps

steps:
  - id: analyze-schema
    name: Analyze Current Schema
    type: task
    prompt: |
      Analyze the current database schema and document:
      1. All tables and their relationships
      2. Indexes and constraints
      3. Potential migration concerns

  - id: generate-migration
    name: Generate Migration
    type: task
    prompt: |
      Based on the schema analysis, generate a migration script that:
      1. Creates backup of affected tables
      2. Applies the schema changes
      3. Validates data integrity after migration

  - id: create-tests
    name: Create Migration Tests
    type: task
    prompt: |
      Create tests for the migration that verify:
      1. Schema changes are applied correctly
      2. Existing data is preserved
      3. Rollback procedure works correctly

